################################################################################
# Specification for Packages installed with Spack: HPX with CUDA & APEX, MKL
#
# - for pcsgs02-05 -> uses GCC 9.4.0, because of system compatability with CUDA
# - choose HPX 1.9.1 to install with APEX without errors
# - unified & view for easier configuration
# - using local CUDA module, with recommended
################################################################################

spack:

  specs:
  - >
      hpx@1.9.1%gcc@9.4.0
      instrumentation=apex
      networking=none
      max_cpu_count=256
      +cuda
  - intel-oneapi-mkl@2024.2.1%gcc@9.4.0

  # unified view towards packages
  view: true

  concretizer:
    unify: true

  packages:
    cuda:
      externals:
        - spec: cuda@12.2.2 # newest CUDA module available
          prefix: /usr/local.nfs/sw/cuda/cuda-12.2.2 # path to $CUDA_HOME
      buildable: false # prevent Spack from installing new CUDA
